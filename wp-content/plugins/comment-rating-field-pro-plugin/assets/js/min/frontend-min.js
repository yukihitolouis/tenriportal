window.jQuery&&function($){if(!$.support.opacity&&!$.support.style)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}$.fn.rating=function(t){if(0==this.length)return this;if("string"==typeof arguments[0]){if(this.length>1){var a=arguments;return this.each(function(){$.fn.rating.apply($(this),a)})}return $.fn.rating[arguments[0]].apply(this,$.makeArray(arguments).slice(1)||[]),this}var t=$.extend({},$.fn.rating.options,t||{});return $.fn.rating.calls++,this.not(".star-rating-applied").addClass("star-rating-applied").each(function(){var a,i=$(this),n=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),r=$(this.form||document.body),e=r.data("rating");e&&e.call==$.fn.rating.calls||(e={count:0,call:$.fn.rating.calls});var s=e[n]||r.data("rating"+n);s&&(a=s.data("rating")),s&&a?a.count++:(a=$.extend({},t||{},($.metadata?i.metadata():$.meta?i.data():null)||{},{count:0,stars:[],inputs:[]}),a.serial=e.count++,s=$('<span class="star-rating-control"/>'),i.before(s),s.addClass("rating-to-be-drawn"),(i.attr("disabled")||i.hasClass("disabled"))&&(a.readOnly=!0),i.hasClass("required")&&(a.required=!0),s.append(a.cancel=$('<div class="rating-cancel"><a title="'+a.cancel+'">'+a.cancelValue+"</a></div>").on("mouseover",function(){$(this).rating("drain"),$(this).addClass("star-rating-hover")}).on("mouseout",function(){$(this).rating("draw"),$(this).removeClass("star-rating-hover")}).on("click",function(){$(this).rating("select")}).data("rating",a)));var l=$('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+a.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");if(s.append(l),this.id&&l.attr("id",this.id),this.className&&l.addClass(this.className),a.half&&(a.split=2),"number"==typeof a.split&&a.split>0){var d=($.fn.width?l.width():0)||a.starWidth,c=a.count%a.split,o=Math.floor(d/a.split);l.width(o).find("a").css({"margin-left":"-"+c*o+"px"})}a.readOnly?l.addClass("star-rating-readonly"):l.addClass("star-rating-live").on("mouseover",function(){$(this).rating("fill"),$(this).rating("focus")}).on("mouseout",function(){$(this).rating("draw"),$(this).rating("blur")}).on("click",function(){$(this).rating("select")}),this.checked&&(a.current=l),"A"==this.nodeName&&$(this).hasClass("selected")&&(a.current=l),i.hide(),i.on("change.rating",function(t){return t.selfTriggered?!1:void $(this).rating("select")}),l.data("rating.input",i.data("rating.star",l)),a.stars[a.stars.length]=l[0],a.inputs[a.inputs.length]=i[0],a.rater=e[n]=s,a.context=r,i.data("rating",a),s.data("rating",a),l.data("rating",a),r.data("rating",e),r.data("rating"+n,s)}),$(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn"),this},$.extend($.fn.rating,{calls:0,focus:function(){var t=this.data("rating");if(!t)return this;if(!t.focus)return this;var a=$(this).data("rating.input")||$("INPUT"==this.tagName?this:null);t.focus&&t.focus.apply(a[0],[a.val(),$("a",a.data("rating.star"))[0]])},blur:function(){var t=this.data("rating");if(!t)return this;if(!t.blur)return this;var a=$(this).data("rating.input")||$("INPUT"==this.tagName?this:null);t.blur&&t.blur.apply(a[0],[a.val(),$("a",a.data("rating.star"))[0]])},fill:function(){var t=this.data("rating");return t?void(t.readOnly||(this.rating("drain"),this.prevAll().addBack().filter(".rater-"+t.serial).addClass("star-rating-hover"))):this},drain:function(){var t=this.data("rating");return t?void(t.readOnly||t.rater.children().filter(".rater-"+t.serial).removeClass("star-rating-on").removeClass("star-rating-hover")):this},draw:function(){var t=this.data("rating");if(!t)return this;this.rating("drain");var a=$(t.current),i=a.length?a.prevAll().addBack().filter(".rater-"+t.serial):null;i&&i.addClass("star-rating-on"),t.cancel[t.readOnly||t.required?"hide":"show"](),this.siblings()[t.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(t,a){var i=this.data("rating");if(!i)return this;if(!i.readOnly){if(i.current=null,"undefined"!=typeof t||this.length>1){if("number"==typeof t)return $(i.stars[t]).rating("select",void 0,a);if("string"==typeof t)return $.each(i.stars,function(){$(this).data("rating.input").val()==t&&$(this).rating("select",void 0,a)}),this}else i.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+i.serial)?this:null;this.data("rating",i),this.rating("draw");var n=$(i.current?i.current.data("rating.input"):null),r=$(i.inputs).filter(":checked"),e=$(i.inputs).not(n);return e.prop("checked",!1),n.prop("checked",!0),$(n.length?n:r).trigger({type:"change",selfTriggered:!0}),(a||void 0==a)&&i.callback&&i.callback.apply(n[0],[n.val(),$("a",i.current)[0]]),this}},readOnly:function(t,a){var i=this.data("rating");return i?(i.readOnly=t||void 0==t?!0:!1,a?$(i.inputs).attr("disabled","disabled"):$(i.inputs).removeAttr("disabled"),this.data("rating",i),void this.rating("draw")):this},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}}),$.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16}}(jQuery),jQuery(document).ready(function($){var t=$("iframe#jetpack_remote_comment").length>0?!0:!1;$("p.crfp-field").each(function(){$("input.star",$(this)).rating({cancel:$(this).parent().data("cancel-text"),cancelValue:0,split:1==crfp.enable_half_ratings?2:1,callback:function(a){var i=$(this).closest(".crfp-field"),n=$("input[type=hidden]",$(i)).attr("name");if($("input[type=hidden]",$(i)).val(a),t){var r=n.replace("crfp-rating[","").replace("]","");$.ajax({type:"POST",url:crfp.ajax_url,data:{action:"comment_rating_field_pro_save_rating",nonce:crfp.nonce,post_id:crfp.post_id,rating:a,field_id:r},success:function(t){},error:function(t,a,i){}})}}})}),$("div.rating-cancel a").bind("click",function(t){var a=$(this).closest(".crfp-field");$("input[type=hidden]",$(a)).val("0")}),$("form#commentform").bind("submit",function(t){$(".crfp-field").each(function(){if("none"!=$(this).css("display")){var a=$(this),i=$(a).data("required"),n=$(a).data("required-text");if("1"==i&&(""==$("input[type=hidden]",$(a)).val()||0==$("input[type=hidden]",$(a)).val()))return alert(n),t.preventDefault(),!1}})}),"undefined"!=typeof crfp&&"undefined"!=typeof addComment&&"1"==crfp.disable_replies&&($("a.comment-reply-link").on("click",function(t){$("p.crfp-field").hide()}),$("a#cancel-comment-reply-link").on("click",function(t){$("p.crfp-field").show()})),t&&$("p.crfp-field").each(function(){$(this).prependTo("#commentform")})});